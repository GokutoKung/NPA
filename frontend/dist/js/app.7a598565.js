(function(){"use strict";var e={6544:function(e,s,t){var a=t(9242),l=t(3396);function o(e,s,t,a,o,i){const r=(0,l.up)("Navbar"),n=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(r,{isAuthen:o.isAuthenticated,role:o.user.role},null,8,["isAuthen","role"]),(0,l.Wm)(n,{user:o.user},null,8,["user"])])}var i=t(4161);const r={authen:"http://52.1.14.189:2000",user:"http://52.7.46.193:2001",upload:"http://34.204.109.227:2002",comment:"http://54.204.27.64:2003",sheet:"http://34.232.1.6:2004"};var n=r;const d={key:0,class:"navbar"},c={id:"navbar",class:"navbar-menu"},u={class:"navbar-start"},m={class:"item"},h={key:0,class:"item"},p={key:1,class:"item"},_={key:2,class:"item"},f={class:"navbar-end"},v={class:"navbar-item"},w=(0,l._)("i",{class:"fa fa-sign-out fas fa-2x","aria-hidden":"true"},null,-1),g=[w];function b(e,s,t,a,o,i){const r=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",null,[t.isAuthen?((0,l.wg)(),(0,l.iD)("nav",d,[(0,l._)("div",c,[(0,l._)("div",u,[(0,l._)("a",m,[(0,l.Wm)(r,{to:"/",id:"nav-item"},{default:(0,l.w5)((()=>[(0,l.Uk)("Home")])),_:1})]),"student"==t.role?((0,l.wg)(),(0,l.iD)("a",h,[(0,l.Wm)(r,{to:"/mySheet",id:"nav-item"},{default:(0,l.w5)((()=>[(0,l.Uk)("My Sheet")])),_:1})])):(0,l.kq)("",!0),"student"==t.role?((0,l.wg)(),(0,l.iD)("a",p,[(0,l.Wm)(r,{to:"/profile",id:"nav-item"},{default:(0,l.w5)((()=>[(0,l.Uk)("Profile")])),_:1})])):(0,l.kq)("",!0),"admin"==t.role?((0,l.wg)(),(0,l.iD)("a",_,[(0,l.Wm)(r,{to:"/profile/admin",id:"nav-item"},{default:(0,l.w5)((()=>[(0,l.Uk)("Profile")])),_:1})])):(0,l.kq)("",!0)]),(0,l._)("div",f,[(0,l._)("div",v,[(0,l._)("span",{class:"button is-warning is-outlined",onClick:s[0]||(s[0]=e=>i.logout())},g)])])])])):(0,l.kq)("",!0)])}t(7658);var y=t(2483);const k=e=>((0,l.dD)("data-v-e5f55978"),e=e(),(0,l.Cn)(),e),C={class:"section hero is-fullheight"},D={class:"columns is-centered"},P={class:"card p-6",style:{width:"500px"}},x=k((()=>(0,l._)("h2",{class:"title is-2 has-text-centered mb-5"},"Login",-1))),j={class:"field"},S=k((()=>(0,l._)("label",{class:"label"},"Email",-1))),z={class:"control"},$={class:"field"},M=k((()=>(0,l._)("label",{class:"label"},"Password",-1))),U={class:"control"},Z={class:"field has-text-centered my-5"},V={class:"field has-text-centered"};function E(e,s,t,o,i,r){const n=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("section",C,[(0,l._)("div",D,[(0,l._)("div",P,[x,(0,l._)("div",j,[S,(0,l._)("div",z,[(0,l.wy)((0,l._)("input",{class:"input",type:"email",placeholder:"กรอกอีเมล","onUpdate:modelValue":s[0]||(s[0]=e=>i.email=e)},null,512),[[a.nr,i.email]])])]),(0,l._)("div",$,[M,(0,l._)("div",U,[(0,l.wy)((0,l._)("input",{class:"input",type:"password",placeholder:"กรอกรหัสผ่าน","onUpdate:modelValue":s[1]||(s[1]=e=>i.password=e)},null,512),[[a.nr,i.password]])])]),(0,l._)("div",Z,[(0,l._)("button",{class:"button is-primary is-rounded is-medium",onClick:s[2]||(s[2]=e=>r.login())},"Login")]),(0,l._)("div",V,[(0,l._)("p",null,[(0,l.Uk)(" Don't have an account? "),(0,l.Wm)(n,{to:"/signup"},{default:(0,l.w5)((()=>[(0,l.Uk)("Sign up")])),_:1})])])])])])])}var q={data(){return{email:"",password:""}},methods:{login(){const e={email:this.email,password:this.password};i.Z.post(`${n.authen}/login`,e).then((e=>{localStorage.setItem("npaToken",e.data),_l.push("/")})).catch((e=>{console.error(e)}))}}},F=t(89);const I=(0,F.Z)(q,[["render",E],["__scopeId","data-v-e5f55978"]]);var O=I,A=t(7139);const T=e=>((0,l.dD)("data-v-844bb6a2"),e=e(),(0,l.Cn)(),e),N={class:"section hero is-fullheight"},L={class:"columns is-centered"},W={class:"card p-6",style:{width:"500px"}},H=T((()=>(0,l._)("h2",{class:"title is-2 has-text-centered mb-5"},"Sign up",-1))),K={class:"field"},Y=T((()=>(0,l._)("label",{class:"label"},"Name",-1))),R={class:"control"},B={class:"field"},G=T((()=>(0,l._)("label",{class:"label"},"Surname",-1))),J={class:"control"},Q={class:"field"},X={class:"columns"},ee={class:"column is-8"},se=T((()=>(0,l._)("label",{class:"label"},"Student ID",-1))),te={class:"control"},ae={class:"column is-4"},le=T((()=>(0,l._)("label",{class:"label"},"Major",-1))),oe={class:"control"},ie={class:"select"},re=T((()=>(0,l._)("option",{disabled:""},"-- สาขา --",-1))),ne=["value"],de={class:"field"},ce=T((()=>(0,l._)("label",{class:"label"},"Email",-1))),ue={class:"control"},me={class:"field"},he=T((()=>(0,l._)("label",{class:"label"},"Password",-1))),pe={class:"control"},_e={class:"field has-text-centered my-5"},fe={class:"field has-text-centered"};function ve(e,s,t,o,i,r){const n=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("section",N,[(0,l._)("div",L,[(0,l._)("div",W,[H,(0,l._)("div",K,[Y,(0,l._)("div",R,[(0,l.wy)((0,l._)("input",{class:"input",type:"text",placeholder:"กรอกชื่อ","onUpdate:modelValue":s[0]||(s[0]=e=>i.name=e)},null,512),[[a.nr,i.name]])])]),(0,l._)("div",B,[G,(0,l._)("div",J,[(0,l.wy)((0,l._)("input",{class:"input",type:"text",placeholder:"กรอกนามสกุล","onUpdate:modelValue":s[1]||(s[1]=e=>i.surname=e)},null,512),[[a.nr,i.surname]])])]),(0,l._)("div",Q,[(0,l._)("div",X,[(0,l._)("div",ee,[se,(0,l._)("div",te,[(0,l.wy)((0,l._)("input",{class:"input",type:"text",placeholder:"กรอกรหัสนักศึกษา","onUpdate:modelValue":s[2]||(s[2]=e=>i.studentID=e)},null,512),[[a.nr,i.studentID]])])]),(0,l._)("div",ae,[le,(0,l._)("div",oe,[(0,l._)("div",ie,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>i.major=e)},[re,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.majors,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e.major_id,key:e.major_id},(0,A.zw)(e.name),9,ne)))),128))],512),[[a.bM,i.major]])])])])])]),(0,l._)("div",de,[ce,(0,l._)("div",ue,[(0,l.wy)((0,l._)("input",{class:"input",type:"email",placeholder:"กรอกอีเมล","onUpdate:modelValue":s[4]||(s[4]=e=>i.email=e)},null,512),[[a.nr,i.email]])])]),(0,l._)("div",me,[he,(0,l._)("div",pe,[(0,l.wy)((0,l._)("input",{class:"input",type:"password",placeholder:"กรอกรหัสผ่าน","onUpdate:modelValue":s[5]||(s[5]=e=>i.password=e)},null,512),[[a.nr,i.password]])])]),(0,l._)("div",_e,[(0,l._)("button",{class:"button is-success is-rounded is-medium mr-3",onClick:s[6]||(s[6]=e=>r.signup())},"Sign up"),(0,l._)("button",{class:"button is-warning is-rounded is-medium",onClick:s[7]||(s[7]=e=>r.resetForm())},"Reset")]),(0,l._)("div",fe,[(0,l._)("p",null,[(0,l.Uk)(" Want to go back to the login page? "),(0,l.Wm)(n,{to:"/login"},{default:(0,l.w5)((()=>[(0,l.Uk)("Back")])),_:1})])])])])])])}var we={data(){return{name:"",surname:"",email:"",password:"",major:"-- สาขา --",studentID:"",majors:[]}},created(){this.getMajor()},methods:{signup(){const e={name:this.name,surname:this.surname,email:this.email,password:this.password,major_id:this.major,student_no:this.studentID};i.Z.post(`${n.authen}/signup`,e).then((e=>{_l.push("/login")})).catch((e=>{console.error(e)}))},getMajor(){i.Z.get(`${n.authen}/major`).then((e=>{this.majors=e.data})).catch((e=>{console.error(e)}))},resetForm(){this.name="",this.surname="",this.email="",this.password="",this.major="-- สาขา --",this.studentID=""}}};const ge=(0,F.Z)(we,[["render",ve],["__scopeId","data-v-844bb6a2"]]);var be=ge;const ye=(0,l._)("h1",{class:"title is-2 has-text-centered mt-5"}," Profile ",-1),ke={class:"hero is-fullheight"},Ce={id:"detail_card",class:"p-6"},De={class:"columns"},Pe={class:"column is-6"},xe={class:"is-size-4 mb-2"},je=(0,l._)("strong",null,"Name : ",-1),Se={id:"text_color"},ze={class:"is-size-4 mb-2"},$e=(0,l._)("strong",null,"Student Id : ",-1),Me={id:"text_color"},Ue={class:"is-size-4 mb-2"},Ze=(0,l._)("strong",null,"Email : ",-1),Ve={id:"text_color"},Ee={class:"column is-6"},qe={class:"is-size-4 mb-2"},Fe=(0,l._)("strong",null,"Surname : ",-1),Ie={id:"text_color"},Oe=["value"],Ae={key:0},Te={key:1,id:"text_color"},Ne={class:"is-size-4 mb-2"},Le=(0,l._)("strong",null,"Information : ",-1),We={id:"text_color"},He={id:"btn",class:"field has-addons mt-5"},Ke={key:0},Ye={class:"field"},Re=(0,l._)("label",{class:"label is-size-5"},"New Password",-1),Be={class:"control"},Ge={class:"field"},Je=(0,l._)("label",{class:"label is-size-5"},"Confirm Password",-1),Qe={class:"control"},Xe={id:"btn",class:"field has-addons mt-5"},es={key:0,style:{color:"red"}},ss=(0,l._)("div",{class:"modal-background"},null,-1),ts={class:"modal-card"},as={class:"modal-card-head"},ls=(0,l._)("p",{class:"modal-card-title"},"Edit Profile",-1),os={class:"modal-card-body"},is={class:"field"},rs=(0,l._)("label",{class:"label"},"Name",-1),ns={class:"control"},ds={class:"field"},cs=(0,l._)("label",{class:"label"},"Surname",-1),us={class:"control"},ms={class:"field"},hs={class:"columns"},ps={class:"column is-8"},_s=(0,l._)("label",{class:"label"},"Student ID",-1),fs={class:"control"},vs={class:"column is-4"},ws=(0,l._)("label",{class:"label"},"Major",-1),gs={class:"control"},bs={class:"select"},ys=(0,l._)("option",{disabled:""},"-- สาขา --",-1),ks=["value"],Cs={class:"field"},Ds=(0,l._)("label",{class:"label"},"Email",-1),Ps={class:"control"},xs={class:"field"},js=(0,l._)("label",{class:"label"},"Information",-1),Ss={class:"control"},zs={class:"modal-card-foot"};function $s(e,s,t,o,i,r){return(0,l.wg)(),(0,l.iD)("div",null,[ye,(0,l._)("div",ke,[(0,l._)("div",Ce,[(0,l._)("div",De,[(0,l._)("div",Pe,[(0,l._)("p",xe,[je,(0,l._)("span",Se,(0,A.zw)(i.profile.name),1)]),(0,l._)("p",ze,[$e,(0,l._)("span",Me,(0,A.zw)(i.profile.student_no),1)]),(0,l._)("p",Ue,[Ze,(0,l._)("span",Ve,(0,A.zw)(i.profile.email),1)])]),(0,l._)("div",Ee,[(0,l._)("p",qe,[Fe,(0,l._)("span",Ie,(0,A.zw)(i.profile.surname),1)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.majors,(e=>((0,l.wg)(),(0,l.iD)("p",{class:"is-size-4 mb-2",value:e.major_id,key:e.major_id},[i.profile.major==e.major_id?((0,l.wg)(),(0,l.iD)("strong",Ae,"Major : ")):(0,l.kq)("",!0),i.profile.major==e.major_id?((0,l.wg)(),(0,l.iD)("span",Te,(0,A.zw)(e.name),1)):(0,l.kq)("",!0)],8,Oe)))),128)),(0,l._)("p",Ne,[Le,(0,l._)("span",We,(0,A.zw)(i.profile.information),1)])])]),(0,l._)("div",He,[(0,l._)("div",{class:"button is-dark is-light is-rounded mr-3",onClick:s[0]||(s[0]=e=>i.showEditProfile=!0)}," Edit Profile "),(0,l._)("div",{class:"button is-warning is-light is-rounded mr-3",onClick:s[1]||(s[1]=e=>i.showModal=!0)}," Change Password ")]),i.showModal?((0,l.wg)(),(0,l.iD)("div",Ke,[(0,l._)("div",Ye,[Re,(0,l._)("div",Be,[(0,l.wy)((0,l._)("input",{class:"input",type:"password",placeholder:"กรอกรหัสผ่านใหม่","onUpdate:modelValue":s[2]||(s[2]=e=>i.password=e)},null,512),[[a.nr,i.password]])])]),(0,l._)("div",Ge,[Je,(0,l._)("div",Qe,[(0,l.wy)((0,l._)("input",{class:"input",type:"password",placeholder:"ยืนยันรหัสผ่านใหม่","onUpdate:modelValue":s[3]||(s[3]=e=>i.confirmPassword=e)},null,512),[[a.nr,i.confirmPassword]])])]),(0,l._)("div",Xe,[(0,l._)("div",{class:"button is-primary is-rounded is-medium mr-3",onClick:s[4]||(s[4]=e=>r.updatePassword())}," Save "),(0,l._)("div",{class:"button is-danger is-rounded is-medium mr-3",onClick:s[5]||(s[5]=e=>r.cancelModal())}," Cancel ")]),i.passwordMismatch?((0,l.wg)(),(0,l.iD)("p",es,"Passwords do not match.")):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])]),(0,l._)("div",{class:(0,A.C_)(["modal",[i.showEditProfile?"is-active":"hidden"]])},[ss,(0,l._)("div",ts,[(0,l._)("header",as,[ls,(0,l._)("button",{class:"delete","aria-label":"close",onClick:s[6]||(s[6]=e=>r.cancelEdit())})]),(0,l._)("section",os,[(0,l._)("div",is,[rs,(0,l._)("div",ns,[(0,l.wy)((0,l._)("input",{class:"input",type:"text",placeholder:"กรอกชื่อ","onUpdate:modelValue":s[7]||(s[7]=e=>i.profile.name=e)},null,512),[[a.nr,i.profile.name]])])]),(0,l._)("div",ds,[cs,(0,l._)("div",us,[(0,l.wy)((0,l._)("input",{class:"input",type:"text",placeholder:"กรอกนามสกุล","onUpdate:modelValue":s[8]||(s[8]=e=>i.profile.surname=e)},null,512),[[a.nr,i.profile.surname]])])]),(0,l._)("div",ms,[(0,l._)("div",hs,[(0,l._)("div",ps,[_s,(0,l._)("div",fs,[(0,l.wy)((0,l._)("input",{class:"input",type:"text",placeholder:"กรอกรหัสนักศึกษา","onUpdate:modelValue":s[9]||(s[9]=e=>i.profile.student_no=e)},null,512),[[a.nr,i.profile.student_no]])])]),(0,l._)("div",vs,[ws,(0,l._)("div",gs,[(0,l._)("div",bs,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":s[10]||(s[10]=e=>this.profile.major=e)},[ys,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.majors,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e.major_id,key:e.major_id},(0,A.zw)(e.name),9,ks)))),128))],512),[[a.bM,this.profile.major]])])])])])]),(0,l._)("div",Cs,[Ds,(0,l._)("div",Ps,[(0,l.wy)((0,l._)("input",{class:"input",type:"email",placeholder:"กรอกอีเมล","onUpdate:modelValue":s[11]||(s[11]=e=>i.profile.email=e)},null,512),[[a.nr,i.profile.email]])])]),(0,l._)("div",xs,[js,(0,l._)("div",Ss,[(0,l.wy)((0,l._)("textarea",{class:"textarea",placeholder:"กรอกข้อมูล","onUpdate:modelValue":s[12]||(s[12]=e=>i.profile.information=e),rows:"5"},null,512),[[a.nr,i.profile.information]])])])]),(0,l._)("footer",zs,[(0,l._)("button",{class:"button is-success",onClick:s[13]||(s[13]=e=>r.editProfile())},"Save changes"),(0,l._)("button",{class:"button is-danger",onClick:s[14]||(s[14]=e=>r.cancelEdit())},"Cancel")])])],2)])}var Ms={props:{user:{type:Object,required:!0}},data(){return{profile:{name:"",surname:"",email:"",student_no:"",major:"",information:""},majors:[],password:"",confirmPassword:"",showModal:!1,showEditProfile:!1,passwordMismatch:!1}},created(){this.getProfile(),this.getMajor()},methods:{updatePassword(){if(this.password!=this.confirmPassword)this.passwordMismatch=!0;else{this.passwordMismatch=!1;const e={password:this.password,user_id:this.user.user_id};i.Z.put(`${n.user}/password`,e).then((e=>{this.showModal=!1,this.password="",this.confirmPassword=""})).catch((e=>{console.error(e)}))}this.passwordMismatch=!1},editProfile(){const e={name:this.profile.name,surname:this.profile.surname,email:this.profile.email,student_no:this.profile.student_no,major:this.profile.major,information:this.profile.information,user_id:this.user.user_id};i.Z.put(`${n.user}/profile/${this.user.role}`,e).then((e=>{this.getProfile()})).catch((e=>{console.error(e)}))},getProfile(){0!=this.user.user_id&&i.Z.get(`${n.user}/profile/${this.user.role}`,{params:{user_id:this.user.user_id}}).then((e=>{this.profile.name=e.data.name,this.profile.surname=e.data.surname,this.profile.email=e.data.email,this.profile.student_no=e.data.student_no,this.profile.information=e.data.information,this.profile.major=e.data.major_id})).catch((e=>{console.error(e)}))},getMajor(){i.Z.get(`${n.authen}/major`).then((e=>{this.majors=e.data})).catch((e=>{console.error(e)}))},cancelModal(){this.showModal=!1,this.password="",this.confirmPassword="",this.passwordMismatch=!1},cancelEdit(){this.showEditProfile=!1}}};const Us=(0,F.Z)(Ms,[["render",$s]]);var Zs=Us,Vs=t.p+"img/sheet.e17d74b0.jpg";const Es=e=>((0,l.dD)("data-v-5c8cf85a"),e=e(),(0,l.Cn)(),e),qs={class:"container is-max-desktop"},Fs={class:"columns my-5"},Is={class:"column"},Os={class:"field has-addons"},As=Es((()=>(0,l._)("div",{class:"control"},[(0,l._)("p",{class:"button is-static is-rounded"},"Category : ")],-1))),Ts={class:"control"},Ns={class:"select is-rounded"},Ls=Es((()=>(0,l._)("option",{value:""},"All",-1))),Ws=["value"],Hs={class:"column"},Ks={class:"field has-addons"},Ys=Es((()=>(0,l._)("div",{class:"control"},[(0,l._)("p",{class:"button is-static is-rounded"},"Sort By : ")],-1))),Rs={class:"control"},Bs={class:"select is-rounded"},Gs=Es((()=>(0,l._)("option",{value:"name"},"Name",-1))),Js=Es((()=>(0,l._)("option",{value:"created_date"},"Created Date",-1))),Qs=[Gs,Js],Xs={class:"column"},et={class:"field has-addons"},st={class:"control search_input"},tt=Es((()=>(0,l._)("button",{class:"button is-dark is-rounded"},[(0,l._)("i",{class:"fa fa-search"})],-1))),at=[tt],lt={class:"hero is-fullheight"},ot={id:"col-card",class:"columns"},it={class:"card pb-2"},rt=Es((()=>(0,l._)("div",{class:"card-image"},[(0,l._)("figure",{class:"image is-4by3"},[(0,l._)("img",{src:Vs,alt:"Sheet Image"})])],-1))),nt={class:"card-content has-text-centered"},dt={class:"is-size-5 title"},ct={class:"is-size-6 subtitle mb-2"},ut={class:"is-size-7 mb-5",style:{color:"#bab2b5"}},mt=Es((()=>(0,l._)("button",{class:"button is-rounded mb-2",style:{color:"#f7f9fb","background-color":"#DD571C",width:"100%"}}," Read ",-1)));function ht(e,s,t,o,i,r){const n=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",qs,[(0,l._)("div",Fs,[(0,l._)("div",Is,[(0,l._)("div",Os,[As,(0,l._)("div",Ts,[(0,l._)("div",Ns,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>i.category=e)},[Ls,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.categories,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e.name,key:e.category_id},(0,A.zw)(e.name),9,Ws)))),128))],512),[[a.bM,i.category]])])])])]),(0,l._)("div",Hs,[(0,l._)("div",Ks,[Ys,(0,l._)("div",Rs,[(0,l._)("div",Bs,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>i.sortOption=e)},Qs,512),[[a.bM,i.sortOption]])])])])]),(0,l._)("div",Xs,[(0,l._)("div",et,[(0,l._)("p",st,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>i.searchText=e),class:"input is-rounded",type:"text",placeholder:"Search",style:{width:"255px"}},null,512),[[a.nr,i.searchText]])]),(0,l._)("p",{class:"control",onClick:s[3]||(s[3]=s=>e.getProducts())},at)])])]),(0,l._)("div",lt,[(0,l._)("div",ot,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.sortedSheets,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"column is-4",key:e.sheet_id},[(0,l._)("div",it,[rt,(0,l._)("div",nt,[(0,l._)("p",dt,(0,A.zw)(e.name),1),(0,l._)("p",ct,(0,A.zw)(e.category),1),(0,l._)("p",ut," Date : "+(0,A.zw)(e.created_date),1),(0,l.Wm)(n,{to:`/Detail/${e.sheet_id}`},{default:(0,l.w5)((()=>[mt])),_:2},1032,["to"])])])])))),128))])])])}var pt={data(){return{category:"",categories:[],sheets:[],sortOption:"name",searchText:""}},created(){this.getCategories(),this.getSheets()},computed:{filteredSheets(){const e=this.searchText.toLowerCase(),s=this.category;return""===s?this.sheets.filter((s=>s.name.toLowerCase().includes(e))):this.sheets.filter((t=>{const a=t.name.toLowerCase().includes(e),l=t.category.toLowerCase()===s.toLowerCase();return a&&l}))},sortedSheets(){const e=this.sortOption,s=this.filteredSheets;return s.slice().sort(((s,t)=>"name"===e?s.name.toLowerCase().localeCompare(t.name.toLowerCase()):"created_date"===e?new Date(s.created_date)-new Date(t.created_date):0))}},methods:{getCategories(){i.Z.get(`${n.upload}/category`).then((e=>{this.categories=e.data})).catch((e=>{console.error("Failed to retrieve categories:",e)}))},getSheets(){i.Z.get(`${n.sheet}/sheet`).then((e=>{this.sheets=e.data})).catch((e=>{console.error("Failed to retrieve sheets:",e)}))}}};const _t=(0,F.Z)(pt,[["render",ht],["__scopeId","data-v-5c8cf85a"]]);var ft=_t;const vt={class:"container is-max-widescreen"},wt={class:"columns mt-5"},gt={class:"column is-8"},bt={class:"hero is-fullheight"},yt={id:"col-card",class:"columns"},kt={class:"card pb-2"},Ct=(0,l._)("div",{class:"card-image"},[(0,l._)("figure",{class:"image is-4by3"},[(0,l._)("img",{src:Vs,alt:"Sheet Image"})])],-1),Dt={class:"card-content has-text-centered"},Pt={class:"is-size-6 title"},xt={class:"is-size-7 subtitle mb-2"},jt={class:"is-size-7 mb-5",style:{color:"#bab2b5"}},St=(0,l._)("button",{class:"button is-rounded mb-2",style:{color:"#f7f9fb","background-color":"#DD571C",width:"100%"}}," Read ",-1),zt={class:"column is-4"},$t={id:"add-card",class:"card p-6"},Mt={class:"field"},Ut=(0,l._)("label",{class:"label"},"Name",-1),Zt={class:"control"},Vt={class:"field"},Et=(0,l._)("label",{class:"label"},"Category",-1),qt={class:"control"},Ft={class:"select"},It=(0,l._)("option",{value:"",disabled:""},"--- ประเภท ---",-1),Ot=["value"],At={class:"field mb-6"},Tt=(0,l._)("label",{class:"label"},"File",-1),Nt={class:"control"},Lt={class:"field has-text-centered"};function Wt(e,s,t,o,i,r){const n=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",vt,[(0,l._)("div",wt,[(0,l._)("div",gt,[(0,l._)("div",bt,[(0,l._)("div",yt,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.sheets,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"column is-4",key:e.sheet_id},[(0,l._)("div",kt,[Ct,(0,l._)("div",Dt,[(0,l._)("p",Pt,(0,A.zw)(e.name),1),(0,l._)("p",xt,(0,A.zw)(r.convertToName(e.category_id)),1),(0,l._)("p",jt," Date : "+(0,A.zw)(e.created_date),1),(0,l.Wm)(n,{to:`/Detail/${e.sheet_id}`},{default:(0,l.w5)((()=>[St])),_:2},1032,["to"])])])])))),128))])])]),(0,l._)("div",zt,[(0,l._)("div",$t,[(0,l._)("div",Mt,[Ut,(0,l._)("div",Zt,[(0,l.wy)((0,l._)("input",{class:"input",type:"text",placeholder:"กรอกชื่อ","onUpdate:modelValue":s[0]||(s[0]=e=>i.name=e)},null,512),[[a.nr,i.name]])])]),(0,l._)("div",Vt,[Et,(0,l._)("div",qt,[(0,l._)("div",Ft,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>i.category=e),style:{width:"300px"}},[It,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.categories,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e.category_id,key:e.category_id},(0,A.zw)(e.name),9,Ot)))),128))],512),[[a.bM,i.category]])])])]),(0,l._)("div",At,[Tt,(0,l._)("div",Nt,[(0,l._)("input",{class:"input",type:"file",onChange:s[2]||(s[2]=(...e)=>r.onFileChange&&r.onFileChange(...e))},null,32)])]),(0,l._)("div",Lt,[(0,l._)("button",{class:"button is-dark is-rounded is-medium px-6",onClick:s[3]||(s[3]=e=>r.addSheet())},"Add")])])])])])}var Ht={props:{user:{type:Object,required:!0}},data(){return{name:"",category:"",file:null,categories:[],sheets:[]}},created(){this.getCategories(),this.getSheets()},methods:{onFileChange(e){this.file=e.target.files[0]},addSheet(){const e=new FormData;e.append("name",this.name),e.append("category",this.category),e.append("file",this.file),e.append("user_id",this.user.user_id),i.Z.post(`${n.upload}/upload`,e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{console.log("Sheet added successfully:",e.data),this.name="",this.category="",this.file=null,this.getSheets()})).catch((e=>{console.error("Failed to add sheet:",e)}))},getCategories(){i.Z.get(`${n.upload}/category`).then((e=>{this.categories=e.data})).catch((e=>{console.error("Failed to retrieve categories:",e)}))},getSheets(){i.Z.get(`${n.sheet}/pdf`,{params:{user_id:this.user.user_id}}).then((e=>{this.sheets=e.data})).catch((e=>{console.error("Failed to retrieve sheets:",e)}))},convertToName(e){const s=this.categories.find((s=>s.category_id===e));return s?s.name:""}}};const Kt=(0,F.Z)(Ht,[["render",Wt]]);var Yt=Kt,Rt=t.p+"img/detail.bb5aa6f6.png";const Bt={key:0,class:"container mt-6"},Gt={class:"columns"},Jt=(0,l._)("div",{class:"column is-7"},[(0,l._)("img",{src:Rt,alt:"Sheet Image"})],-1),Qt={class:"column is-5"},Xt={class:"card py-5 px-6"},ea={class:"is-size-3 title"},sa={class:"is-size-5"},ta=(0,l._)("b",null,"Category :",-1),aa={class:"is-size-5"},la=(0,l._)("b",null,"Created Date :",-1),oa={class:"field mt-4"},ia={class:"field my-5"},ra={class:"control",style:{width:"100%"}},na=(0,l._)("button",{class:"button is-dark is-rounded",style:{width:"100%"}}," Send ",-1),da=[na],ca={id:"show-comment"},ua=(0,l._)("h1",{class:"title"},"Comment",-1),ma={class:"card mb-4"},ha={class:"mb-2"},pa={class:"is-size-7 mb-2 has-text-right",style:{color:"#bab2b5"}},_a={class:"has-text-right"},fa=["onClick"],va=(0,l._)("i",{class:"fa fa-trash fas fa-lg","aria-hidden":"true"},null,-1),wa=[va];function ga(e,s,t,o,i,r){return i.sheet?((0,l.wg)(),(0,l.iD)("div",Bt,[(0,l._)("div",Gt,[Jt,(0,l._)("div",Qt,[(0,l._)("div",Xt,[(0,l._)("p",ea,(0,A.zw)(i.sheet.name),1),(0,l._)("p",sa,[ta,(0,l.Uk)(" "+(0,A.zw)(i.sheet.category),1)]),(0,l._)("p",aa,[la,(0,l.Uk)(" "+(0,A.zw)(i.sheet.created_date),1)]),(0,l._)("div",oa,[(0,l._)("button",{class:"button is-success mr-4",onClick:s[0]||(s[0]=(...e)=>r.openPDF&&r.openPDF(...e))},"Open PDF"),"admin"===t.user.role||t.user.user_id===i.sheet.user_id?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"button is-danger",onClick:s[1]||(s[1]=(...e)=>r.deleteSheet&&r.deleteSheet(...e))},"Delete PDF")):(0,l.kq)("",!0)])]),(0,l._)("div",ia,[(0,l._)("div",ra,[(0,l.wy)((0,l._)("textarea",{class:"textarea",placeholder:"แสดงความคิดเห็น...",rows:"3","onUpdate:modelValue":s[2]||(s[2]=e=>i.newComment=e)},null,512),[[a.nr,i.newComment]])]),(0,l._)("div",{class:"control mt-3",onClick:s[3]||(s[3]=e=>r.addComment())},da)]),(0,l._)("div",ca,[ua,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.comments,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.comment_id},[(0,l._)("div",ma,[(0,l._)("p",ha,(0,A.zw)(e.comment),1),(0,l._)("p",pa,(0,A.zw)(e.created_date),1),(0,l._)("div",_a,["admin"===t.user.role||t.user.user_id===e.user_id?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"button is-danger is-outlined is-small",onClick:s=>r.deleteComment(e.comment_id)},wa,8,fa)):(0,l.kq)("",!0)])])])))),128))])])])])):(0,l.kq)("",!0)}var ba={props:{user:{type:Object,required:!0}},data(){return{sheet:null,comments:[],newComment:""}},created(){this.getSheetDetails(),this.getComments()},methods:{getSheetDetails(){const e=this.$route.params.sheet_id;i.Z.get(`${n.sheet}/pdf/${e}`).then((e=>{this.sheet=e.data})).catch((e=>{console.error("Failed to retrieve sheet details:",e)}))},openPDF(){const e=this.$route.params.sheet_id;i.Z.get(`${n.upload}/pdf/${e}/file`,{responseType:"blob"}).then((e=>{const s=new Blob([e.data],{type:"application/pdf"}),t=window.URL.createObjectURL(s);window.open(t,"_blank")})).catch((e=>{console.error("Failed to retrieve PDF:",e)}))},deleteSheet(){const e=this.$route.params.sheet_id;i.Z["delete"](`${n.sheet}/sheet/${e}`).then((()=>{_l.push("/mySheet")})).catch((e=>{console.error("Failed to delete sheet:",e)}))},getComments(){const e=this.$route.params.sheet_id;i.Z.get(`${n.comment}/comment/${e}`).then((e=>{this.comments=e.data})).catch((e=>{console.error("Failed to retrieve comments:",e)}))},addComment(){const e=this.$route.params.sheet_id,s={comment:this.newComment,sheet_id:e,user_id:this.user.user_id};i.Z.post(`${n.comment}/comment`,s).then((()=>{this.newComment="",this.getComments()})).catch((e=>{console.error("Failed to add comment:",e)}))},deleteComment(e){i.Z["delete"](`${n.comment}/comment/${e}`).then((()=>{this.getComments()})).catch((e=>{console.error("Failed to delete comment:",e)}))}}};const ya=(0,F.Z)(ba,[["render",ga]]);var ka=ya;const Ca=e=>((0,l.dD)("data-v-4bd48b76"),e=e(),(0,l.Cn)(),e),Da=Ca((()=>(0,l._)("h1",{class:"title is-2 has-text-centered mt-5"}," Profile ",-1))),Pa={class:"hero is-fullheight"},xa={id:"detail_card",class:"p-6"},ja={class:"columns"},Sa={class:"column"},za={class:"is-size-4 mb-2"},$a=Ca((()=>(0,l._)("strong",null,"Name : ",-1))),Ma={id:"text_color"},Ua={class:"is-size-4 mb-2"},Za=Ca((()=>(0,l._)("strong",null,"Surname : ",-1))),Va={id:"text_color"},Ea={class:"is-size-4 mb-2"},qa=Ca((()=>(0,l._)("strong",null,"Email : ",-1))),Fa={id:"text_color"},Ia={id:"btn",class:"field has-addons mt-5"},Oa={key:0},Aa={class:"field"},Ta=Ca((()=>(0,l._)("label",{class:"label is-size-5"},"New Password",-1))),Na={class:"control"},La={class:"field"},Wa=Ca((()=>(0,l._)("label",{class:"label is-size-5"},"Confirm Password",-1))),Ha={class:"control"},Ka={id:"btn",class:"field has-addons mt-5"},Ya={key:0,style:{color:"red"}},Ra=Ca((()=>(0,l._)("div",{class:"modal-background"},null,-1))),Ba={class:"modal-card"},Ga={class:"modal-card-head"},Ja=Ca((()=>(0,l._)("p",{class:"modal-card-title"},"Edit Profile",-1))),Qa={class:"modal-card-body"},Xa={class:"field"},el=Ca((()=>(0,l._)("label",{class:"label"},"Name",-1))),sl={class:"control"},tl={class:"field"},al=Ca((()=>(0,l._)("label",{class:"label"},"Surname",-1))),ll={class:"control"},ol={class:"field"},il=Ca((()=>(0,l._)("label",{class:"label"},"Email",-1))),rl={class:"control"},nl={class:"modal-card-foot"};function dl(e,s,t,o,i,r){return(0,l.wg)(),(0,l.iD)("div",null,[Da,(0,l._)("div",Pa,[(0,l._)("div",xa,[(0,l._)("div",ja,[(0,l._)("div",Sa,[(0,l._)("p",za,[$a,(0,l._)("span",Ma,(0,A.zw)(i.profile.name),1)]),(0,l._)("p",Ua,[Za,(0,l._)("span",Va,(0,A.zw)(i.profile.surname),1)]),(0,l._)("p",Ea,[qa,(0,l._)("span",Fa,(0,A.zw)(i.profile.email),1)])])]),(0,l._)("div",Ia,[(0,l._)("div",{class:"button is-dark is-light is-rounded mr-3",onClick:s[0]||(s[0]=e=>i.showEditProfile=!0)}," Edit Profile "),(0,l._)("div",{class:"button is-warning is-light is-rounded mr-3",onClick:s[1]||(s[1]=e=>i.showModal=!0)}," Change Password ")]),i.showModal?((0,l.wg)(),(0,l.iD)("div",Oa,[(0,l._)("div",Aa,[Ta,(0,l._)("div",Na,[(0,l.wy)((0,l._)("input",{class:"input",type:"password",placeholder:"กรอกรหัสผ่านใหม่","onUpdate:modelValue":s[2]||(s[2]=e=>i.password=e)},null,512),[[a.nr,i.password]])])]),(0,l._)("div",La,[Wa,(0,l._)("div",Ha,[(0,l.wy)((0,l._)("input",{class:"input",type:"password",placeholder:"ยืนยันรหัสผ่านใหม่","onUpdate:modelValue":s[3]||(s[3]=e=>i.confirmPassword=e)},null,512),[[a.nr,i.confirmPassword]])])]),(0,l._)("div",Ka,[(0,l._)("div",{class:"button is-primary is-rounded is-medium mr-3",onClick:s[4]||(s[4]=e=>r.updatePassword())}," Save "),(0,l._)("div",{class:"button is-danger is-rounded is-medium mr-3",onClick:s[5]||(s[5]=e=>r.cancelModal())}," Cancel ")]),i.passwordMismatch?((0,l.wg)(),(0,l.iD)("p",Ya,"Passwords do not match.")):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])]),(0,l._)("div",{class:(0,A.C_)(["modal",[i.showEditProfile?"is-active":"hidden"]])},[Ra,(0,l._)("div",Ba,[(0,l._)("header",Ga,[Ja,(0,l._)("button",{class:"delete","aria-label":"close",onClick:s[6]||(s[6]=e=>r.cancelEdit())})]),(0,l._)("section",Qa,[(0,l._)("div",Xa,[el,(0,l._)("div",sl,[(0,l.wy)((0,l._)("input",{class:"input",type:"text",placeholder:"กรอกชื่อ","onUpdate:modelValue":s[7]||(s[7]=e=>i.profile.name=e)},null,512),[[a.nr,i.profile.name]])])]),(0,l._)("div",tl,[al,(0,l._)("div",ll,[(0,l.wy)((0,l._)("input",{class:"input",type:"text",placeholder:"กรอกนามสกุล","onUpdate:modelValue":s[8]||(s[8]=e=>i.profile.surname=e)},null,512),[[a.nr,i.profile.surname]])])]),(0,l._)("div",ol,[il,(0,l._)("div",rl,[(0,l.wy)((0,l._)("input",{class:"input",type:"email",placeholder:"กรอกอีเมล","onUpdate:modelValue":s[9]||(s[9]=e=>i.profile.email=e)},null,512),[[a.nr,i.profile.email]])])])]),(0,l._)("footer",nl,[(0,l._)("button",{class:"button is-success",onClick:s[10]||(s[10]=e=>r.editProfile())},"Save changes"),(0,l._)("button",{class:"button is-danger",onClick:s[11]||(s[11]=e=>r.cancelEdit())},"Cancel")])])],2)])}var cl={props:{user:{type:Object,required:!0}},data(){return{profile:{name:"",surname:"",email:""},password:"",confirmPassword:"",showModal:!1,showEditProfile:!1,passwordMismatch:!1}},created(){this.getProfile()},methods:{updatePassword(){if(this.password!=this.confirmPassword)this.passwordMismatch=!0;else{this.passwordMismatch=!1;const e={password:this.password,user_id:this.user.user_id};i.Z.put(`${n.user}/password`,e).then((e=>{this.showModal=!1,this.password="",this.confirmPassword=""})).catch((e=>{console.error(e)}))}},editProfile(){const e={name:this.profile.name,surname:this.profile.surname,email:this.profile.email,user_id:this.user.user_id};i.Z.put(`${n.user}/profile/${this.user.role}`,e).then((e=>{this.getProfile()})).catch((e=>{console.error(e)}))},getProfile(){0!=this.user.user_id&&i.Z.get(`${n.user}/profile/${this.user.role}`,{params:{user_id:this.user.user_id}}).then((e=>{this.profile.name=e.data.name,this.profile.surname=e.data.surname,this.profile.email=e.data.email})).catch((e=>{console.error(e)}))},cancelModal(){this.showModal=!1,this.password="",this.confirmPassword="",this.passwordMismatch=!1},cancelEdit(){this.showEditProfile=!1}}};const ul=(0,F.Z)(cl,[["render",dl],["__scopeId","data-v-4bd48b76"]]);var ml=ul;const hl=[{path:"/login",name:"Login",component:O,meta:{requiresAuth:!1}},{path:"/signup",name:"Signup",component:be,meta:{requiresAuth:!1}},{path:"/profile",name:"Profile",component:Zs,meta:{requiresAuth:!0}},{path:"/",name:"Home",component:ft,meta:{requiresAuth:!0}},{path:"/mySheet",name:"mySheet",component:Yt,meta:{requiresAuth:!0}},{path:"/detail/:sheet_id",name:"Detail",component:ka,meta:{requiresAuth:!0}},{path:"/profile/admin",name:"adminProfile",component:ml,meta:{requiresAuth:!0}}],pl=(0,y.p7)({history:(0,y.PO)(),routes:hl});pl.beforeEach(((e,s,t)=>{const a=localStorage.getItem("npaToken");e.meta.requiresAuth&&!a?t({name:"Login"}):t()}));var _l=pl,fl={props:["isAuthen","role"],data(){return{name:"Navbar"}},methods:{logout(){const e={token:localStorage.getItem("npaToken")};i.Z.post(`${n.authen}/logout`,e).then((e=>{localStorage.removeItem("npaToken"),_l.push("/login")})).catch((e=>{console.error(e)}))}}};const vl=(0,F.Z)(fl,[["render",b]]);var wl=vl,gl={components:{Navbar:wl},data(){return{user:{user_id:0,role:""},isAuthenticated:!1}},watch:{$route(){this.setProps()}},methods:{setProps(){const e=localStorage.getItem("npaToken");e?i.Z.get(`${n.authen}/login`,{params:{token:e}}).then((e=>{this.user.user_id=e.data.user_id,this.user.role=e.data.role,this.isAuthenticated=!0})).catch((e=>{console.error(e)})):this.isAuthenticated=!1}}};const bl=(0,F.Z)(gl,[["render",o]]);var yl=bl;(0,a.ri)(yl).use(_l).mount("#app")}},s={};function t(a){var l=s[a];if(void 0!==l)return l.exports;var o=s[a]={exports:{}};return e[a].call(o.exports,o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(s,a,l,o){if(!a){var i=1/0;for(c=0;c<e.length;c++){a=e[c][0],l=e[c][1],o=e[c][2];for(var r=!0,n=0;n<a.length;n++)(!1&o||i>=o)&&Object.keys(t.O).every((function(e){return t.O[e](a[n])}))?a.splice(n--,1):(r=!1,o<i&&(i=o));if(r){e.splice(c--,1);var d=l();void 0!==d&&(s=d)}}return s}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[a,l,o]}}(),function(){t.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(s,{a:s}),s}}(),function(){t.d=function(e,s){for(var a in s)t.o(s,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){t.p="/"}(),function(){var e={143:0};t.O.j=function(s){return 0===e[s]};var s=function(s,a){var l,o,i=a[0],r=a[1],n=a[2],d=0;if(i.some((function(s){return 0!==e[s]}))){for(l in r)t.o(r,l)&&(t.m[l]=r[l]);if(n)var c=n(t)}for(s&&s(a);d<i.length;d++)o=i[d],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(c)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(s.bind(null,0)),a.push=s.bind(null,a.push.bind(a))}();var a=t.O(void 0,[998],(function(){return t(6544)}));a=t.O(a)})();
//# sourceMappingURL=app.7a598565.js.map